<% provide(:title, "Skills List") %>

<h1>Skills</h1>

<section class='skills'>

  <%= form_tag skills_path, :method => 'get', :class =>'search' do %>
    <p>
      <%= text_field_tag :skills, params[:skills], :id=> 'skills_autocomplete',
        :data => {:skills =>  SkillTotal.retrieve_skills() } %>
      <%= submit_tag "Search", :name=>nil %>
    </p>
  <% end %>


  <table > 
    <tr>
      <th class='name'>Skill</th>
      <th class='total'>Total</th>
    </tr>
    <% @skills.each do |skill| %>
    <tr>
      <td class='name'><%= link_to skill.name, chart_path(2, :skills => skill.name)  %></td>
      <td class='total'><%= skill.total %></td>
    </tr>
    <% end %>
 
  </table>

  <%= will_paginate %>
</section>


<% content_for :javascript do %>
  <script type='text/javascript'>
    $(document).ready(function(){
      $("#skills_autocomplete").autocomplete({
        source: $("#skills_autocomplete").data("skills")
      });
    });
     /* {
        source: function(request, response){
          url: <%= skills_path %>,
          dataType: "json",
          data: {

          }
        }
      });
    })*/
  </script>
<% end %>